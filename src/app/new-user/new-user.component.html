<h1 style="text-align:center">

</h1>
<div class="login">
  <h2 class="login-header">{{titulo}}</h2>
  <form [formGroup]="newUserForm" class="login-container" (ngSubmit)="newUser()">

    <p class="pr-0 pl-0" [ngClass]="{ 'has-error': isSubmitted && formControls.email.errors }">
      <input type="email" placeholder="Email" formControlName="email" [readonly]="isValidating">
    </p>

    <div *ngIf="isSubmitted && formControls.email.errors" class="help-block">
      <div *ngIf="formControls.email.errors.required">Email é obrigatório</div>
      <div *ngIf="formControls.email.errors.maxlength">Email não deve exceder 100 caracteres</div>
      <div *ngIf="formControls.email.errors.minlength">Email não deve ser menor que 3 caracteres</div>
      <div *ngIf="formControls.email.errors.pattern">Padrão de email inválido</div>
    </div>

    <p class="pr-0 pl-0" [ngClass]="{ 'has-error': isSubmitted && formControls.password.errors }">
      <input type="password" placeholder="Senha" formControlName="password" [readonly]="isValidating">
    </p>

    <div *ngIf="isSubmitted && formControls.password.errors" class="help-block">
      <div *ngIf="formControls.password.errors.required">Senha é obrigatório</div>
      <div *ngIf="formControls.password.errors.maxlength">Senha não deve exceder 15 caracteres</div>
      <div *ngIf="formControls.password.errors.minlength">Senha não deve ser menor que 7 caracteres</div>
      <div *ngIf="formControls.password.errors.pattern">Senha não segue o padrão</div>
    </div>


    <p class="pr-0 pl-0" [ngClass]="{ 'has-error': isSubmitted && formControls.confirmPass.errors }">
      <input type="password" placeholder="Repita a senha" formControlName="confirmPass" [readonly]="isValidating">
    </p>

    <div class="mb-4" *ngIf="newUserForm.errors?.notSame">
      <h6 class="text-danger text-center">Confirmação da senha precisa ser igual a senha</h6>
    </div>

    <div *ngIf="isSubmitted && formControls.confirmPass.errors" class="help-block">
      <div *ngIf="formControls.confirmPass.errors.required">Senha é obrigatório</div>
      <div *ngIf="formControls.confirmPass.errors.maxlength">Senha não deve exceder 15 caracteres</div>
      <div *ngIf="formControls.confirmPass.errors.minlength">Senha não deve ser menor que 7 caracteres</div>
      <div *ngIf="formControls.confirmPass.errors.pattern">Senha não segue o padrão</div>
    </div>

    <app-password-strength [form]="newUserForm"></app-password-strength>
    
    <div *ngIf="isValidating">
      <p class="pr-0 pl-0" [ngClass]="{ 'has-error': isSubmitted && formControls.codigo.errors }">
        <input type="codigo" placeholder="Código" formControlName="codigo">
      </p>

      <div *ngIf="isSubmitted && formControls.codigo.errors" class="help-block">
        <div *ngIf="formControls.codigo.errors.required">Código é obrigatório</div>
        <div *ngIf="formControls.codigo.errors.maxlength">Código não deve exceder 15 caracteres</div>
        <div *ngIf="formControls.codigo.errors.minlength">Código não deve ser menor que 7 caracteres</div>
        <div *ngIf="formControls.codigo.errors.pattern">Código não segue o padrão</div>
      </div>
    </div>
    
    <div class="c-padding">
      <button [disabled]="validationForm" type="submit" class="btn w-100">
        Enviar
      </button>
      <button type="button" class="btn w-100 mt-2" (click)="telaLogin()">Voltar</button>
    </div>
    <p>
      {{mensagemRetorno}}
    </p>
  </form>
</div>